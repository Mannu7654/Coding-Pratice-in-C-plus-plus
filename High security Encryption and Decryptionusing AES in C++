//  My Project in C++ : High security Encryption and Decryption Using AES and Cryptography

//#include <iostream>
//#include <fstream>
//#include <sstream>
//#include <string>

#include<bits/stdc++.h>
using namespace std;

int main()
{
    int a,i=0;
    string text, old, password1, password2,pass,name,password0,age,user,word,word1;
    string creds[2],cp[2];

    cout << "     HIGH SECURITY ENCRYPTION AND DECRYPTION      " << endl;

    cout<<" ________________________________________________"<<endl<<endl;
    cout<<"|               1.REGISTER                       |"<<endl<<endl;
    cout<<"|               2.LOGIN                          |"<<endl<<endl;
    cout<<"|               3.CHANGE PASSWORD                |"<<endl<<endl;
    cout<<"|______________ 4.END PROGRAM ___________________|"<<endl<<endl;

    do{
        cout<<endl<<endl;
        cout<<"ENTER YOUR CHOICE:- ";
        cin>>a;
        switch(a)
        {

            case 1:
                {
                    cout<<" ____________________________"<<endl<<endl;
                    cout<<"|--------REGISTER------------|"<<endl<<endl;
                    cout<<"|____________________________|"<<endl<<endl;
                    cout<<"ENTER USERNAME :- ";
                    cin>>name;
                    cout<<"Set the Password :- "<<endl;
                    cin>>password0;
                    cout<<"PLEASE ENTER YOUR AGE:-";
                    cin>>age;

                    ofstream fout;
                    fout.open("C:\\myFile\\CA4.txt");
                    if(fout.is_open()){
                        fout<<name<<"\n";
                        fout<<password0;
                        cout<<" REGISTRATION SUCCESSFULL "<<endl;
                    }
                    break;
                }
            case 2:
                {
                    i=0;

                    cout<<" ____________________________"<<endl<<endl;
                    cout<<"|----------LOGIN-------------|"<<endl<<endl;
                    cout<<"|____________________________|"<<endl<<endl;

                    ifstream fin;
                    fin.open("C:\\myFile\\CA4.txt");
                    cout<<"PLEASE ENTER THE USERNAME:-";
                    cin>>user;
                    cout<<"PLEASE ENTER THE PASSWORD:-";
                    cin>>pass;

                    if(fin.is_open())
                    {
                        while(!fin.eof())
                        {
                            while(getline(fin,text)){
                                istringstream iss(text);
                                iss>>word;
                                creds[i]=word;
                                 i++;
                            }
                            if(user==creds[0] && pass==creds[1])
                            {
                                cout<<"------LOG IN SUCCESSFUL------";
                                cout<<endl<<endl;

                                cout<<" DETAILS: "<<endl;

                                cout<<" USERNAME: "+ name<<endl;
                                cout<<" PASSWORD: "+ pass<<endl;
                                cout<<" AGE: "+age<<endl;
                            }
                            else{
                                cout<<endl<<endl;
                                cout<<" INCORRECT CREDENTIALS "<<endl;
                                cout<<"|       1.press 2 to login                 |"<<endl;
                                cout<<"|       2.press 3  to change password      |"<<endl;
                                break;
                            }
                        }
                    }
                        break;
                    }
            case 3:
                {
                    i=0;

                    cout<<"--------------CHANGE PASSWORD--------------"<<endl;

                    ifstream fin1;
                    fin1.open("C:\\myFile\\CA4.txt");
                    cout<<" ENTER THE OLD PASSWORD:- ";
                    cin>>old;
                    if(fin1.is_open())
                    {
                        while(fin1.eof())
                        {
                            while(getline(fin1,text)){
                                istringstream iss(text);
                                iss>>word1;
                                cp[i]=word1;
                                i++;
                            }
                            if(old==cp[1])
                            {
                                fin1.close();

                                ofstream fout;
                                if(fout.is_open())
                                {
                                    cout<<" ENTER YOUR NEW PASSWORD:- ";
                                    cin>>password1;
                                    cout<<" ENTER YOUR PASSWORD AGAIN:-";
                                    cin>>password2;

                                    if(password1==password2)
                                    {
                                        fout<<cp[0]<<"\n";
                                        fout<<password1;
                                        cout<<" PASSWORD CHANGED SUCCESSFULLY "<<endl;
                                    }
                                    else{
                                        fout<<cp[0]<<"\n";
                                        fout<<old;
                                        cout<<" PASSWORD DO NOT MATCH "<<endl;
                                    }
                                }
                            }
                            else{
                                cout<<" PLEASE ENTER A VALID PASSWORD "<<endl;
                                break;
                            }
                        }
                    }
                    break;
                }
                case 4:
                    {
                    cout<<"_____________THANYOU____________";
                break;
                    }

                default:
                    cout<<"PLEASE ENTER A VALID CHOICE";
                }
        }
        while(a!=4);

 

};
